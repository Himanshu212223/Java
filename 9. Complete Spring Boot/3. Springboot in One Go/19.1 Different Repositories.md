# Different Repository in JPA

Topic - 

1. CrudRepository
2. PagingAndSortingRepository
3. JpaRepository and @Query Annotation 


## 1. CrudRepository (old) , ListCrudRepository (new)

- To use the CRUD Repository, create an **interface** and extend it with **CrudRepository** Interface like below - 

```
public interface ApplicationCrudRepository extends CrudRepository < Entity_Class_Name, Entity_Class_PrimaryKey_Datatype > {}
```

- It will provide out of the box methods to perform CRUD operations.

- It is a light weight and suitable for CRUD operation.

#### Configuration in application.properties file for h2 Database (in memory database)

> Note :- H2 Database is in memory database and data will disapper when we restart the app.

```
spring.database.url = jdbc:h2:men:appdb
spring.database.driverClassName = org.h2.Driver
spring.database.username = root
spring.database.password = root
spring.h2.console.enabled = true
spring.jpa.hibernate.ddl-auto = update
spring.jpa.show-sql = true
```







## 2. PagingAndSortingRepository (old) , ListPagingAndSortingRepository (new)

- It provide some more features related to Paging and Sorting.

- Refer the below code to use it - 

```
public interface ApplicationPagingAndSortingRepository extends ListPagingAndSotingRepository < Entity_Class_Name, Entity_Class_PrimaryKey_Datatype > , ListCrudRepository < Entity_Class_Name, Entity_Class_PrimaryKey_Datatype > {}
```


How to consumre the Pagination - 

In service file, we can use it in any method like below - 

```
public Iterable<Applicant> getApplicantWithPagination ( int page, int size ) {
    return applicationPagingAndSortingRepository.findAll ( PageRequest.of ( page, size ) ) ;
}
```












## 3. JPA Repository

- It provides the features of **CrudRepository** as well as the features of **PagingAndSortingRepository** along with some JPA Specific methods, custom query method  and batch operations.

- This is how we create the Repository - 

```
public interface JpaRepository extends CrudRepository < Entity_Class_Name, Entity_Class_PrimaryKey_Datatype > {

}
```

- It provides out of the box custom query method which we can use by simply defining a method on the Respoitory Interface and JPA will auto configure the respective query.

```
public interface JpaRepository extends CrudRepository < Entity_Class_Name, Entity_Class_PrimaryKey_Datatype > {

    List<Applicant> findByFirstName (String firstName ) ;  // Query methods

}
```

### We can also define our own query using **@Query** Annotation like below - 

```
public interface JpaRepository extends CrudRepository < Entity_Class_Name, Entity_Class_PrimaryKey_Datatype > {

    List<Applicant> findByFirstName (String firstName ) ;  // Query methods

    @Query("SELECT a FROM Applicant a WHERE a.name LIKE %:pName% ")
    List<Applicant> findApplicantByPartialName ( @Param("pName") String pName ) ;

}
```

