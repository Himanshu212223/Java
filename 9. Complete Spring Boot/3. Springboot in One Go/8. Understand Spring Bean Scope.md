# Understand Spring Bean Scope

Topics - 
1. Scope of Bean
2. Types of Beans based on Scope
    - Singleton
    - Prototype
    - Request
    - Session


## 1. Scope of Bean

Scope of Bean defines the lifecycle and visibility of the Bean.

## 2. Type of Beans

### Singleton 

- Only Single Bean will be injected.
- It is default scope of the Bean as well.
- It is Eager Initialization.

Ex - 

```
@Service
@Scope("singleton")
public class ProductService implements InitializingBean {

    private final ProductRepository productRepository ; 

    @Autowired
    public ProductService ( ProductRepository productRepository ) {
        this.productRepository = productRepository ;
    }

    @Override
    public void afterPropertiesSet () thows Exception {
        .....
        System.out.println("This will run just after Beans are created");
    }

}
```


### Prototype 

- Each Time new Object created.
- Lazily initialized.

Ex - 

```
@Service
@Scope("prototype")
public class ProductService implements InitializingBean {

    private final ProductRepository productRepository ; 

    @Autowired
    public ProductService ( ProductRepository productRepository ) {
        this.productRepository = productRepository ;
    }

    @Override
    public void afterPropertiesSet () thows Exception {
        .....
        System.out.println("This will run just after Beans are created");
    }

}
```



### Request 

- It created one Bean per HTTP Request.
- Lazily initialized - initialized when needed only.
- When Injecting request scoped bean in singleton scoped bean it needs proxyMode.

Ex - 

```
@Service
@Scope("request", proxyMode = ScopedProxyMode.TARGET_CLASS)
public class ProductService implements InitializingBean {

    private final ProductRepository productRepository ; 

    @Autowired
    public ProductService ( ProductRepository productRepository ) {
        this.productRepository = productRepository ;
    }

    @Override
    public void afterPropertiesSet () thows Exception {
        .....
        System.out.println("This will run just after Beans are created");
    }

}
```




### Session 

- New Object for each http session.
- Lazily initialized - initialized when needed only.
- When user access any api, session is created.
- Remains active till session is expired.
- A session can have multiple http requests.

Ex - 

```
@Service
@Scope("session")
public class ProductService implements InitializingBean {

    private final ProductRepository productRepository ; 

    @Autowired
    public ProductService ( ProductRepository productRepository ) {
        this.productRepository = productRepository ;
    }

    @Override
    public void afterPropertiesSet () thows Exception {
        .....
        System.out.println("This will run just after Beans are created");
    }

}
```